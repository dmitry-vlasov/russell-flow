import ru_math;
import mm_src;

export {
	RuEnv(
		ruMath : RuMath, 
		mmMath : MmMath,
		conf   : RuConf
	);
	RuCommArg(
		name : string,
		optional : bool,
		help : string,
		defval : string
	);
	RuComm(
		name : string,
		category : string,
		help : string,
		args : [RuCommArg],
		run : (RuTask, RuEnv) -> RuEnv
	);

	ruComm2s(comm : RuComm) -> string;cd 
}

ruComm2s(comm : RuComm) -> string {
	arg2s = \arg -> 
		arg.name + " " + 
		(if (arg.optional) "(optional) " else "") + arg.help + 
		(if (arg.defval == "") "" else " defval: " + arg.defval);
	"    " + comm.name + "\t[" + comm.category + "]\t" + comm.help + 
	if (comm.args == []) "" else 
		", arguments: " + strGlue(map(comm.args, arg2s), ", ");
}
