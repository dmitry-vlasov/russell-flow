import mm/parse/commands;
import mm/to_ru;
import mm/verify;
import ru/parse/collect;

export {
	mmCommands() -> [RuComm];
	mmCommTranslate(task : RuTask, env : RuEnv) -> RuEnv;
}

mmCommands() -> [RuComm] {
	concat(mmIoCommands(), 
		[RuComm(
			"mm-to-ru", "translate", "translate Metamath to Russell", "file",
			[RuCommArg("file", false, "input file", "")],
			mmCommTranslate
		)]
	);
}

mmCommTranslate(task : RuTask, env : RuEnv) -> RuEnv {
	eitherMap(
		ruCollectMath(mm2ru(env.mmMath, env.conf), env.conf), 
		\math -> RuEnv(env with ruMath = math), 
		env
	);
}
