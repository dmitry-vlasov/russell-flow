import comm;

export {
	ruCommComplexityStats : RuComm;
}

ruCommComplexityStats = RuComm(
	RuCommInfo("stats-theorem-complexity", "stats", "gather statistics about theorem complexity", "", false, false, [], []),
	\unit -> {
		env = ruUnitEnv(unit);
		state = unit.state;
		timer = ruMakeTimer();
		math = ruMathFromSources(state.ru, env);
		Some(RuState(state with 
			ru = state.ru,
			vars = setTree(setTree(state.vars, 
				"extract-constants.time", ValDouble(ruTimePassed(timer))), 
				"extract-constants.size", ValInt(sizeTree(math.decls.lang.consts))
			)
		));
	}
);
