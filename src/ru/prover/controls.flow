import ru/prover/tree;

export {

	RuProverTactic(
		description : string,
		expand : (RuProverTree) -> [RuProverProp],
		finished : (RuProverTree) -> bool
	);

	RuProverStrategy(
		description : string,
		initTactic : () -> RuProverTactic,
		nextTactic : (RuProverTree) -> RuProverTactic
	);

	ruMakeDefaultTactic() -> RuProverTactic;
	ruMakeDefaultStrategy() -> RuProverStrategy;
}

ruMakeDefaultTactic() -> RuProverTactic {
	RuProverTactic("default tactic",
		\tree -> switch (tree.leafs) {
			TreeNode(__,prop,__,__,__): [prop];
			TreeEmpty(): [];
		},
        \tree -> length(^(tree.proofs)) > 0
	);
}

ruMakeDefaultStrategy() -> RuProverStrategy {
	RuProverStrategy("default strategy",
		ruMakeDefaultTactic,
		\tree -> ruMakeDefaultTactic(),
	);
}
