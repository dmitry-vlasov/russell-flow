import ru/src;

export {
	ruReindexProof(proof : RuProof, reindex : Tree<RuRef, RuRef>) -> RuProof;
}

ruReindexProof(proof : RuProof, reindex : Tree<RuRef, RuRef>) -> RuProof {
	RuProof(proof with
		steps = map(proof.steps, 
			\step -> RuStep(step with 
				ind = lookupTreeDef(reindex, RuStepRef(step.ind), RuStepRef(step.ind)).ind,
				refs = map(step.refs, \rf -> lookupTreeDef(reindex, rf, rf))
			)
		)
	);
}
