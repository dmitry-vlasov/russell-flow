import ru/util/src;
import ru/cache/fileinfo;

export {
	ruDeclPlace(decl : RuDecl, env : RuEnv) -> RuPlace;
}

ruDeclPlace(decl : RuDecl, env : RuEnv) -> RuPlace {
	switch (ruFileInfoCacheGet(decl.info.src)) {
		Some(info): {
			RuPlace(info.path, decl.info.pos);
		}
		None(): {
			env.out.onError("Source: '" + id2s(decl.info.src) + "' is not cached", []);
			RuPlace(id2s(decl.info.src), decl.info.pos);
		}
	}
}
