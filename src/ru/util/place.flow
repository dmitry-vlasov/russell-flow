import ru/util/src;
import ru/cache/cache;

export {
	ruDeclPlace(decl : RuDecl, env : RuEnv) -> RuPlace;
}

ruDeclPlace(decl : RuDecl, env : RuEnv) -> RuPlace {
	//ruCacheGet(id : int, exact, env : RuEnv) -> Maybe<RuSource>;
	switch (ruCacheGet(decl.info.src, false, env)) {
		Some(src): {
			RuPlace(src.info.path, decl.info.pos);
		}
		None(): {
			env.out.onError("Source: '" + id2s(decl.info.src) + "' is not cached", []);
			RuPlace(id2s(decl.info.src), decl.info.pos);
		}
	}
}
